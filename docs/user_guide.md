# Discord RSS Bot ユーザーガイド

このガイドでは、Discord RSS Botの使用方法について説明します。

## 目次

1. [概要](#概要)
2. [スラッシュコマンド](#スラッシュコマンド)
3. [RSSフィードの管理](#rssフィードの管理)
4. [AI処理の設定](#ai処理の設定)
5. [チャンネル管理](#チャンネル管理)
6. [エンベッドメッセージのカスタマイズ](#エンベッドメッセージのカスタマイズ)
7. [高度な設定](#高度な設定)

## 概要

Discord RSS Botは、RSS/atomフィードを監視し、新規記事をAIで処理してDiscordに投稿するボットです。主な機能は以下の通りです：

- 複数のRSS/atomフィードの監視
- AIによる記事の要約とジャンル分類（要約時に自動翻訳）
- 処理済み記事のDiscordチャンネルへの自動投稿
- ジャンルベースのチャンネル振り分け
- スラッシュコマンドによる操作

## スラッシュコマンド

Discord RSS Botは以下のスラッシュコマンドを提供しています：

### `/rss_config`

設定パネルを表示します。このパネルでは、以下の設定が可能です：

- 要約に使用するAIモデルの選択
- フィード確認間隔の設定
- チャンネルを追加するカテゴリーの選択

### `/rss_check_now`

このコマンドが送信されたチャンネルの最新記事を1件取得し、要約処理を行って投稿します。

### `/rss_list_feeds`

登録されているRSSフィードの一覧を表示します。各フィードの情報（URL、タイトル、投稿先チャンネル）が表示されます。

### `/addrss`

新しいRSS/atomフィードを追加します。以下のパラメータが必要です：

- `url`: RSS/atomフィードのURL
- `channel_name`（オプション）: 投稿先チャンネル名。指定しない場合は、フィード名に基づいてチャンネルが自動作成されます。

### `/rss_list_channels`

RSSフィード用のチャンネル一覧を表示します。

### `/rss_status`

ボットのステータス情報を表示します。以下の情報が含まれます：

- 稼働時間
- 監視中のフィード数
- 処理済み記事数
- 最終確認時刻
- AIプロバイダ情報

## RSSフィードの管理

### フィードの追加

新しいRSSフィードを追加するには、`/addrss`コマンドを使用します：

```
/addrss url:https://example.com/feed.xml channel_name:tech-news
```

チャンネル名を指定しない場合は、フィード名に基づいてチャンネルが自動作成されます。

### フィードの一覧表示

登録されているフィードの一覧を表示するには、`/rss_list_feeds`コマンドを使用します。

### フィードの削除

フィードを削除するには、`/rss_list_feeds`コマンドで表示されるリストから削除したいフィードを選択します。

## AI処理の設定

### AIプロバイダの選択

AIプロバイダを選択するには、`/rss_config`コマンドを使用して設定パネルを表示し、「AIプロバイダ」セクションで選択します。

以下のAIプロバイダが利用可能です：

- **LM Studio**: ローカルで動作するLLMモデルを使用します。
- **Google Gemini**: Google Gemini APIを使用します。


### 要約設定

記事の要約を有効/無効にするには、`/rss_config`コマンドを使用して設定パネルを表示し、「要約」セクションで設定します。要約の文字数も設定できます。

### ジャンル分類設定

記事のジャンル分類を有効/無効にするには、`/rss_config`コマンドを使用して設定パネルを表示し、「ジャンル分類」セクションで設定します。

## チャンネル管理

### チャンネルの自動作成

新しいフィードを追加すると、指定したチャンネル名でチャンネルが自動作成されます。チャンネル名を指定しない場合は、フィード名に基づいてチャンネルが作成されます。

### チャンネルの一覧表示

RSSフィード用のチャンネル一覧を表示するには、`/rss_list_channels`コマンドを使用します。

### ジャンルベースのチャンネル振り分け

ジャンル分類を有効にすると、記事は分類されたジャンルに基づいて適切なチャンネルに投稿されます。ジャンルごとのチャンネルは、`/rss_config`コマンドの「カテゴリ設定」セクションで設定できます。

## エンベッドメッセージのカスタマイズ

Discord RSS Botは、記事情報を視覚的に表示するためにエンベッドメッセージを使用します。エンベッドメッセージは以下の要素で構成されています：

- **タイトル**: 記事のタイトル（カテゴリ絵文字付き）
- **説明**: 記事の要約または内容の一部
- **フィールド**: フィード名、著者、カテゴリ、公開日時などの情報
- **サムネイル**: 記事に画像がある場合は表示
- **フッター**: AI処理情報（要約済み、分類済みなど）

エンベッドメッセージのカスタマイズは、`config.json`ファイルを編集することで行えます。

## 高度な設定

高度な設定は、`data/config.json`ファイルを直接編集することで行えます。主な設定項目は以下の通りです：

### 基本設定

```json
{
  "discord_token": "your_discord_token",
  "guild_id": "your_guild_id",
  "admin_ids": ["admin_user_id_1", "admin_user_id_2"],
  "category_id": "category_id_for_rss_channels",
  "check_interval": 15,
  "max_articles": 5
}
```

### AIプロバイダ設定

```json
{
  "ai_provider": "gemini",
  "fallback_ai_provider": "gemini",
  "lmstudio_api_url": "http://localhost:1234/v1",
  "gemini_api_key": "your_gemini_api_key"
}
```

### 処理設定

```json
{
  "summarize": true,
  "summary_length": 200,
  "classify": true
}
```

### カテゴリ設定

```json
{
  "categories": [
    {
      "name": "technology",
      "jp_name": "テクノロジー",
      "emoji": "💻"
    },
    {
      "name": "business",
      "jp_name": "ビジネス",
      "emoji": "💼"
    },
    {
      "name": "politics",
      "jp_name": "政治",
      "emoji": "🏛️"
    },
    {
      "name": "entertainment",
      "jp_name": "エンタメ",
      "emoji": "🎬"
    },
    {
      "name": "sports",
      "jp_name": "スポーツ",
      "emoji": "⚽"
    },
    {
      "name": "science",
      "jp_name": "科学",
      "emoji": "🔬"
    },
    {
      "name": "health",
      "jp_name": "健康",
      "emoji": "🏥"
    },
    {
      "name": "other",
      "jp_name": "その他",
      "emoji": "📌"
    }
  ]
}
```

### 表示設定

```json
{
  "embed_color": 3447003,
  "use_thumbnails": true
}
```

### ログ設定

```json
{
  "log_level": "INFO",
  "log_file": "data/bot.log"
}
```

